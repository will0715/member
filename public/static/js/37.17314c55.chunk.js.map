{"version":3,"sources":["views/reports/MemberRegisterBranchDetail/Header.js","views/reports/MemberRegisterBranchDetail/index.js","hooks/useIsMountedRef.js","utils/analytics.js","components/Page.js","services/reportService.js","utils/datetime.js"],"names":["useStyles","makeStyles","theme","root","action","marginBottom","spacing","marginLeft","actionIcon","marginRight","Header","className","searchRange","handleSelect","reloadData","rest","classes","t","useTranslation","start","end","React","useState","open","setOpen","handleClose","Grid","clsx","container","justify","item","Breadcrumbs","separator","fontSize","aria-label","Link","variant","color","to","component","RouterLink","Typography","Button","onClick","SvgIcon","format","Dialog","onClose","aria-labelledby","aria-describedby","editableDateInputs","dateDisplayFormat","ranges","startDate","toDate","endDate","key","minDate","moment","add","maxDate","onChange","DialogActions","autoFocus","backgroundColor","palette","background","dark","minHeight","paddingTop","paddingBottom","MemberRegisterBranchDetail","needLoad","setNeedLoad","record","setRecord","startTime","setStartTime","endTime","setEndTime","useEffect","a","reportService","memberRegisterBranchDetail","startOf","endOf","data","fetch","columns","title","field","render","rowData","register_branch","name","code","toDateTimeString","created_at","Page","Container","maxWidth","selection","Box","mt","options","pageSize","pageSizeOptions","useIsMountedRef","isMounted","useRef","current","track","window","gtag","pageview","props","process","REACT_APP_GA_MEASUREMENT_ID","event","type","forwardRef","ref","children","location","useLocation","sendPageViewEvent","useCallback","page_path","pathname","Helmet","dashboard","axios","get","prepaidcardTopup","query","prepaidcardPayment","chopsAdd","chopsConsume","transactions","memberRegisterBranchStatistics","dateTime"],"mappings":"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","file":"static/js/37.17314c55.chunk.js","sourcesContent":["import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport {\n  Box,\n  Breadcrumbs,\n  Button,\n  Grid,\n  Link,\n  SvgIcon,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport { Calendar as CalendarIcon } from 'react-feather';\nimport { useTranslation } from 'react-i18next';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { DateRange } from 'react-date-range';\nimport moment from 'moment';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  action: {\n    marginBottom: theme.spacing(1),\n    '& + &': {\n      marginLeft: theme.spacing(1)\n    }\n  },\n  actionIcon: {\n    marginRight: theme.spacing(1)\n  }\n}));\n\nfunction Header({ className, searchRange, handleSelect, reloadData, ...rest }) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const { start, end } = searchRange;\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    reloadData();\n  };\n\n  return (\n    <Grid\n      className={clsx(classes.root, className)}\n      container\n      justify=\"space-between\"\n      spacing={3}\n      {...rest}\n    >\n      <Grid item>\n        <Breadcrumbs separator={<NavigateNextIcon fontSize=\"small\" />} aria-label=\"breadcrumb\">\n          <Link variant=\"body1\" color=\"inherit\" to=\"/\" component={RouterLink}>\n            {t('Dashboard')}\n          </Link>\n          <Typography variant=\"body1\" color=\"textPrimary\">\n            {t('Member Register Branch Detail')}\n          </Typography>\n        </Breadcrumbs>\n        <Typography variant=\"h3\" color=\"textPrimary\">\n          {t('Member Register Branch Detail')}\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Button\n          color=\"secondary\"\n          variant=\"contained\"\n          className={classes.action}\n          onClick={handleClickOpen}\n        >\n          <SvgIcon fontSize=\"small\" className={classes.actionIcon}>\n            <CalendarIcon />\n          </SvgIcon>\n          {start.format('YYYY-MM-DD')} ~{end.format('YYYY-MM-DD')}\n        </Button>\n      </Grid>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DateRange\n          editableDateInputs={true}\n          dateDisplayFormat=\"yyyy-MM-dd\"\n          ranges={[\n            {\n              startDate: start.toDate(),\n              endDate: end.toDate(),\n              key: 'selection',\n              color: '#bc785b'\n            }\n          ]}\n          minDate={moment()\n            .add('-1', 'years')\n            .toDate()}\n          maxDate={moment().toDate()}\n          onChange={handleSelect}\n        />\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Grid>\n  );\n}\n\nHeader.propTypes = {\n  className: PropTypes.string\n};\n\nexport default Header;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport MaterialTable from 'material-table';\nimport {\n  TextField, Container, Box, IconButton, SvgIcon, makeStyles\n} from '@material-ui/core';\n\nimport { Edit as EditIcon, ArrowRight as ArrowRightIcon, Trash } from 'react-feather';\nimport { useTranslation } from 'react-i18next';\nimport { DateRange } from 'react-date-range';\nimport moment from 'moment';\nimport Header from './Header';\nimport useIsMountedRef from '../../../hooks/useIsMountedRef';\nimport reportService from '../../../services/reportService';\nimport Page from '../../../components/Page';\nimport { toDateTimeString } from '../../../utils/datetime.js';\n// import Results from './Results';\nimport 'react-date-range/dist/styles.css'; // main style file\nimport 'react-date-range/dist/theme/default.css'; // theme css file\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3)\n  }\n}));\n\nexport default function MemberRegisterBranchDetail() {\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const [needLoad, setNeedLoad] = useState(true);\n  const [record, setRecord] = useState();\n  const [startTime, setStartTime] = useState(moment().add(-1, 'months'));\n  const [endTime, setEndTime] = useState(moment());\n\n  useEffect(() => {\n    async function fetch() {\n      const data = await reportService.memberRegisterBranchDetail({\n        start: startTime.startOf('day').format('YYYY-MM-DD HH:mm:ss'),\n        end: endTime.endOf('day').format('YYYY-MM-DD HH:mm:ss')\n      });\n      setRecord(data.data.data);\n    }\n    if (needLoad) {\n      fetch();\n      setNeedLoad(false);\n    }\n  }, [needLoad]);\n\n  const reloadData = () => {\n    setNeedLoad(true);\n  };\n\n  const handleSelect = (ranges) => {\n    const { selection } = ranges;\n    const { startDate, endDate } = selection;\n    // if (startDate == startTime && endTime == endDate)\n    setStartTime(moment(startDate));\n    setEndTime(moment(endDate));\n  };\n\n  const columns = [\n    {\n      title: t('First Name'),\n      field: 'first_name'\n    },\n    {\n      title: t('Last Name'),\n      field: 'last_name'\n    },\n    {\n      title: t('Phone'),\n      field: 'phone'\n    },\n    {\n      title: t('Branch'),\n      field: 'branch',\n      render: (rowData) => (rowData.register_branch\n        ? `${rowData.register_branch.name}(${rowData.register_branch.code})`\n        : t('Non Register Branch'))\n    },\n    {\n      title: t('Time'),\n      field: 'created_at',\n      render: (rowData) => toDateTimeString(rowData.created_at)\n    }\n  ];\n\n  return (\n    <Page className={classes.root} title={t('Member Register Branch Detail')}>\n      <Container maxWidth={false}>\n        <Header\n          searchRange={{\n            start: startTime,\n            end: endTime\n          }}\n          handleSelect={handleSelect}\n          reloadData={reloadData}\n        />\n        {record && (\n          <Box mt={3}>\n            <MaterialTable\n              title={t('Member Register Branch Detail')}\n              options={{\n                pageSize: 15,\n                pageSizeOptions: [15, 30, 50]\n              }}\n              columns={columns}\n              data={record}\n            />\n          </Box>\n        )}\n      </Container>\n    </Page>\n  );\n}\n","import { useRef, useEffect } from 'react';\n\nexport default function useIsMountedRef() {\n  const isMounted = useRef(true);\n\n  useEffect(() => () => {\n    isMounted.current = false;\n  }, []);\n\n  return isMounted;\n}\n","function track(...args) {\n  if (process.env.NODE_ENV !== 'production') {\n    return;\n  }\n\n  if (!window.gtag) {\n    return;\n  }\n\n  window.gtag(...args);\n}\n\nfunction pageview(props) {\n  track('config', process.env.REACT_APP_GA_MEASUREMENT_ID, props);\n}\n\nfunction event(type, props) {\n  track('event', type, props);\n}\n\nexport default {\n  pageview,\n  event\n};\n","import React, { forwardRef, useEffect, useCallback } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useLocation } from 'react-router';\nimport PropTypes from 'prop-types';\nimport track from '../utils/analytics';\n\nconst Page = forwardRef(({ title, children, ...rest }, ref) => {\n  const location = useLocation();\n\n  const sendPageViewEvent = useCallback(() => {\n    track.pageview({\n      page_path: location.pathname\n    });\n  }, [location]);\n\n  useEffect(() => {\n    sendPageViewEvent();\n  }, [sendPageViewEvent]);\n\n  return (\n    <div ref={ref} {...rest}>\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      {children}\n    </div>\n  );\n});\n\nPage.propTypes = {\n  children: PropTypes.node,\n  title: PropTypes.string\n};\n\nexport default Page;\n","import axios from '../utils/axios';\n\nclass ReportService {\n  dashboard = async () => {\n    const record = await axios.get('/api/v1/report/dashboard');\n    return record;\n  };\n\n  prepaidcardTopup = async (query) => {\n    const record = await axios.get(\n      `/api/v1/report/prepaidcards/topup?start=${query.start}&end=${query.end}`\n    );\n    return record;\n  };\n\n  prepaidcardPayment = async (query) => {\n    const record = await axios.get(\n      `/api/v1/report/prepaidcards/payment?start=${query.start}&end=${query.end}`\n    );\n    return record;\n  };\n\n  chopsAdd = async (query) => {\n    const record = await axios.get(\n      `/api/v1/report/chops/add?start=${query.start}&end=${query.end}`\n    );\n    return record;\n  };\n\n  chopsConsume = async (query) => {\n    const record = await axios.get(\n      `/api/v1/report/chops/consume?start=${query.start}&end=${query.end}`\n    );\n    return record;\n  };\n\n  transactions = async (query) => {\n    const record = await axios.get(\n      `/api/v1/report/transactions?start=${query.start}&end=${query.end}`\n    );\n    return record;\n  };\n\n  memberRegisterBranchDetail = async (query) => {\n    const record = await axios.get(\n      `/api/v1/report/memberRegisterBranch/detail?start=${query.start}&end=${query.end}`\n    );\n    return record;\n  };\n\n  memberRegisterBranchStatistics = async (query) => {\n    const record = await axios.get(\n      `/api/v1/report/memberRegisterBranch/statistics?start=${query.start}&end=${query.end}`\n    );\n    return record;\n  };\n}\n\nconst reportService = new ReportService();\n\nexport default reportService;\n","import moment from 'moment';\n\nexport const toDateString = (date) => moment(date).format('YYYY-MM-DD');\n\nexport const toDateTimeString = (dateTime) => moment(dateTime).format('YYYY-MM-DD HH:mm:ss');\n"],"sourceRoot":""}