(this["webpackJsonpmember-backend"]=this["webpackJsonpmember-backend"]||[]).push([[20],{1005:function(e,t,a){"use strict";var n=a(22),r=a.n(n),c=a(41),u=a(182),i=a(14),s=new function e(){Object(u.a)(this,e),this.list=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/v1/earnChopRules");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),this.create=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/v1/earnChopRules",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.get=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/v1/earnChopRules/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.update=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.patch("/api/v1/earnChopRules/".concat(t),a);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.delete("/api/v1/earnChopRules/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=s},1008:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=["ALL","LINE_PAY","CASH"]},1009:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=["AMOUNT","ITEM_COUNT"]},1228:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a.n(n),c=a(41),u=a(57),i=a(0),s=a.n(i),o=a(487),l=a(944),p=a(301),m=a(973),d=a(988),f=a(972),v=a(84),h=a(126),b=a(2),E=a(982),_=a(983),O=a(49),x=a(977),j=a(940),k=a(941),y=a(951),g=a(924),C=a(910),w=a(1059),R=a(995),T=a(1008),S=a(1009),Y=a(971),A=a(1005),M=a(1038),P=a.n(M),D=Object(o.a)((function(){return{root:{}}}));var H=function(e){var t=e.className,a=e.earnChopRule,n=e.ranks,u=Object(h.a)(e,["className","earnChopRule","ranks"]),i=D(),o=Object(x.a)().successSnackbar,l=Object(Y.a)().t,m=Object(O.g)();return s.a.createElement(_.a,{initialValues:{name:a.name||"",description:a.description||"",payment_type:a.payment_type||"ALL",type:a.type||"AMOUNT",rule_unit:a.rule_unit||1,rule_chops:a.rule_chops||1,rank_id:a.rank_id||"",activated_at:P()(a.activated_at?a.activated_at:"").format("YYYY-MM-DD HH:mm:ss"),expired_at:P()(a.expired_at?a.expired_at:"").format("YYYY-MM-DD HH:mm:ss")},validationSchema:E.d().shape({name:E.e().max(255).required(l("is required",{name:l("Name")})),description:E.e().max(255),payment_type:E.e().oneOf(["ALL","LINE_PAY","CASH"]),type:E.e().oneOf(["AMOUNT","ITEM_COUNT"]),rule_unit:E.c().min(1),rule_chops:E.c().min(0)}),onSubmit:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var c,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.resetForm,c=n.setErrors,u=n.setStatus,i=n.setSubmitting,e.prev=1,e.next=4,A.a.update(a.id,Object(v.a)({},t,{id:a.id}));case 4:u({success:!0}),i(!1),o(l("Updated",{name:l("Earn Chop Rule")})),m.push("/earnChopRules"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),u({success:!1}),c({submit:e.t0.response.data.message}),i(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var a=e.errors,r=e.handleBlur,c=e.handleChange,o=e.handleSubmit,m=e.isSubmitting,d=e.touched,f=e.values,v=e.setFieldValue;return s.a.createElement("form",Object.assign({className:Object(b.a)(i.root,t),onSubmit:o},u),s.a.createElement(j.a,null,s.a.createElement(k.a,null,a.submit&&s.a.createElement(p.a,{mb:3},s.a.createElement(R.a,{severity:"error"},a.submit)),s.a.createElement(y.a,{container:!0,spacing:3},s.a.createElement(y.a,{item:!0,md:6,xs:12},s.a.createElement(g.a,{error:Boolean(d.name&&a.name),fullWidth:!0,helperText:d.name&&a.name,label:l("Name"),name:"name",onBlur:r,onChange:c,required:!0,value:f.name,variant:"outlined"})),s.a.createElement(y.a,{item:!0,md:6,xs:12},s.a.createElement(g.a,{error:Boolean(d.description&&a.description),fullWidth:!0,helperText:d.description&&a.description,label:l("Description"),name:"description",onBlur:r,onChange:c,required:!0,value:f.description,variant:"outlined"})),s.a.createElement(y.a,{item:!0,md:6,xs:12},s.a.createElement(g.a,{fullWidth:!0,label:l("Rank"),name:"rank_id",onChange:c,select:!0,required:!0,SelectProps:{native:!0},value:f.rank_id,variant:"outlined"},n.map((function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.name)})))),s.a.createElement(y.a,{item:!0,md:6,xs:12},s.a.createElement(g.a,{fullWidth:!0,label:l("Payment Type"),name:"payment_type",onChange:c,select:!0,SelectProps:{native:!0},value:f.payment_type,variant:"outlined"},T.a.map((function(e){return s.a.createElement("option",{key:e,value:e},l("PaymentType.".concat(e)))})))),s.a.createElement(y.a,{item:!0,md:6,xs:12},s.a.createElement(g.a,{fullWidth:!0,label:l("Type"),name:"type",onChange:c,select:!0,SelectProps:{native:!0},value:f.type,variant:"outlined"},S.a.map((function(e){return s.a.createElement("option",{key:e,value:e},l("Type.".concat(e)))})))),s.a.createElement(y.a,{item:!0,md:12,xs:12}),s.a.createElement(y.a,{item:!0,md:6,xs:12},s.a.createElement(g.a,{error:Boolean(d.rule_unit&&a.rule_unit),fullWidth:!0,helperText:d.rule_unit&&a.rule_unit,label:l("Rule Unit"),name:"rule_unit",type:"number",onBlur:r,onChange:c,required:!0,value:f.rule_unit,variant:"outlined"})),s.a.createElement(y.a,{item:!0,md:6,xs:12},s.a.createElement(g.a,{error:Boolean(d.rule_chops&&a.rule_chops),fullWidth:!0,helperText:d.rule_chops&&a.rule_chops,label:l("Rule Chops"),name:"rule_chops",type:"number",onBlur:r,onChange:c,required:!0,value:f.rule_chops,variant:"outlined"})),s.a.createElement(y.a,{item:!0,md:12,xs:12}),s.a.createElement(y.a,{item:!0,md:6,xs:12},s.a.createElement(w.a,{error:Boolean(d.activated_at&&a.activated_at),fullWidth:!0,helperText:d.activated_at&&a.activated_at,value:f.activated_at,label:l("Activated At"),name:"activated_at",onBlur:r,format:"YYYY-MM-DD HH:mm:ss",required:!0,onChange:function(e){return v("activated_at",P()(e).format("YYYY-MM-DD HH:mm:ss"))},inputVariant:"outlined"})),s.a.createElement(y.a,{item:!0,md:6,xs:12},s.a.createElement(w.a,{error:Boolean(d.expired_at&&a.expired_at),fullWidth:!0,helperText:d.expired_at&&a.expired_at,value:f.expired_at,label:l("Expired At"),name:"expired_at",onBlur:r,format:"YYYY-MM-DD HH:mm:ss",required:!0,onChange:function(e){return v("expired_at",P()(e).format("YYYY-MM-DD HH:mm:ss"))},inputVariant:"outlined"}))),s.a.createElement(p.a,{mt:2},s.a.createElement(C.a,{variant:"contained",color:"secondary",type:"submit",disabled:m},l("Submit"))))))}))},N=a(64),B=a(968),W=a(937),L=a(74),q=a(976),U=a.n(q),I=Object(o.a)((function(){return{root:{}}}));var V=function(e){var t=e.className,a=Object(h.a)(e,["className"]),n=I(),r=Object(Y.a)().t;return s.a.createElement("div",Object.assign({className:Object(b.a)(n.root,t)},a),s.a.createElement(B.a,{separator:s.a.createElement(U.a,{fontSize:"small"}),"aria-label":"breadcrumb"},s.a.createElement(W.a,{variant:"body1",color:"inherit",to:"/",component:N.a},r("Dashboard")),s.a.createElement(W.a,{variant:"body1",color:"inherit",to:"/earnChopRules",component:N.a},r("Earn Chop Rule List")),s.a.createElement(L.a,{variant:"body1",color:"textPrimary"},r("Edit Earn Chop Rules"))),s.a.createElement(L.a,{variant:"h3",color:"textPrimary"},r("Edit Earn Chop Rules")))},z=Object(o.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));t.default=function(){var e=Object(O.i)().id,t=z(),a=Object(f.a)(),n=s.a.useState(),o=Object(u.a)(n,2),v=o[0],h=o[1],b=Object(d.a)().ranks,E=Object(Y.a)().t,_=Object(i.useCallback)(Object(c.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.a.get(e);case 2:a=t.sent,h(a.data.data);case 4:case"end":return t.stop()}}),t)}))),[a]);return Object(i.useEffect)((function(){_()}),[_]),v?s.a.createElement(m.a,{className:t.root,title:E("Edit Earn Chop Rules")},s.a.createElement(l.a,{maxWidth:"lg"},s.a.createElement(V,null),s.a.createElement(p.a,{mt:3},s.a.createElement(H,{earnChopRule:v,ranks:b})))):null}},972:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0);function r(){var e=Object(n.useRef)(!0);return Object(n.useEffect)((function(){return function(){e.current=!1}}),[]),e}},973:function(e,t,a){"use strict";var n=a(126),r=a(0),c=a.n(r),u=a(319),i=a(49);function s(){var e;window.gtag&&(e=window).gtag.apply(e,arguments)}var o={pageview:function(e){s("config",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MEMBER_API_HOST:"mbrtest.zoomye.com.tw",REACT_APP_MEMBER_API_PORT:"80"}).REACT_APP_GA_MEASUREMENT_ID,e)},event:function(e,t){s("event",e,t)}},l=Object(r.forwardRef)((function(e,t){var a=e.title,s=e.children,l=Object(n.a)(e,["title","children"]),p=Object(i.h)(),m=Object(r.useCallback)((function(){o.pageview({page_path:p.pathname})}),[p]);return Object(r.useEffect)((function(){m()}),[m]),c.a.createElement("div",Object.assign({ref:t},l),c.a.createElement(u.Helmet,null,c.a.createElement("title",null,a)),s)}));t.a=l},977:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a(0);var n=a(184);function r(){var e=Object(n.useSnackbar)().enqueueSnackbar;return{successSnackbar:function(t){e(t,{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"right"}})}}}},979:function(e,t,a){"use strict";var n=a(22),r=a.n(n),c=a(41),u=a(182),i=a(14),s=new function e(){Object(u.a)(this,e),this.list=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/v1/ranks");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),this.create=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/v1/ranks",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.get=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/v1/ranks/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.update=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.patch("/api/v1/ranks/".concat(t),a);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.delete("/api/v1/ranks/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=s},988:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(22),r=a.n(n),c=a(41),u=a(57),i=a(0),s=a(972),o=a(979);function l(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1],l=Object(s.a)(),p=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.list();case 2:t=e.sent,n(t.data.data);case 4:case"end":return e.stop()}}),e)}))),[l]),m=Object(i.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete(t);case 2:p();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]);return Object(i.useEffect)((function(){p()}),[p]),{ranks:a,deleteRank:m}}}}]);
//# sourceMappingURL=20.97abda1b.chunk.js.map