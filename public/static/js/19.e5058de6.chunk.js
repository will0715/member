(this["webpackJsonpmember-backend"]=this["webpackJsonpmember-backend"]||[]).push([[19],{1002:function(e,t,a){"use strict";var r=a(22),n=a.n(r),c=a(41),u=a(182),s=a(14),i=new function e(){Object(u.a)(this,e),this.list=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/v1/members");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),this.create=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/api/v1/members",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.get=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/v1/members/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.update=function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.patch("/api/v1/members/".concat(t),a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete("/api/v1/members/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.detail=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/v1/members/".concat(t,"/detail"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=i},1006:function(e,t,a){"use strict";var r=a(22),n=a.n(r),c=a(41),u=a(182),s=a(14),i=new function e(){Object(u.a)(this,e),this.list=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/v1/branches");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),this.create=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/api/v1/branches",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.get=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/v1/branches/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.update=function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.patch("/api/v1/branches/".concat(t),a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete("/api/v1/branches/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=i},1023:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(22),n=a.n(r),c=a(41),u=a(57),s=a(0),i=a(972),o=a(975),p=a(1002);function l(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(o.a)(),b=Object(i.a)().i18n.language,m=Object(s.useCallback)(Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.list();case 2:t=e.sent,r(t.data.data);case 4:case"end":return e.stop()}}),e)}))),[l]),f=Object(s.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete(t);case 2:m();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m]),d=Object(s.useCallback)((function(e){switch(b){case"zh-TW":case"zh-CN":return"".concat(e.last_name).concat(e.first_name);default:return"".concat(e.first_name," ").concat(e.last_name)}}),[b]);return Object(s.useEffect)((function(){m()}),[m]),{members:a,deleteMember:f,getMemberFullName:d}}},1063:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a(22),n=a.n(r),c=a(41),u=a(57),s=a(0),i=a(975),o=a(1006);function p(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],p=Object(i.a)(),l=Object(s.useCallback)(Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.list();case 2:t=e.sent,r(t.data.data);case 4:case"end":return e.stop()}}),e)}))),[p]),b=Object(s.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete(t);case 2:l();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]);return Object(s.useEffect)((function(){l()}),[l]),{branches:a,deleteBranch:b}}},1119:function(e,t,a){"use strict";var r=a(126),n=a(0),c=a.n(n),u=a(1364),s=a(924);t.a=function(e){var t=e.textFieldProps,a=Object(r.a)(e,["textFieldProps"]);a.label,a.required,a.variant,a.name,a.getOptionLabel;return c.a.createElement(u.a,Object.assign({},a,{renderInput:function(e){return c.a.createElement(s.a,Object.assign({},e,t))}}))}},1347:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(487),u=a(944),s=a(301),i=a(972),o=a(976),p=a(126),l=a(64),b=a(2),m=a(969),f=a(937),d=a(74),v=a(982),h=a.n(v),O=Object(c.a)((function(){return{root:{}}}));var j=function(e){var t=e.className,a=Object(p.a)(e,["className"]),r=O(),c=Object(i.a)().t;return n.a.createElement("div",Object.assign({className:Object(b.a)(r.root,t)},a),n.a.createElement(m.a,{separator:n.a.createElement(h.a,{fontSize:"small"}),"aria-label":"breadcrumb"},n.a.createElement(f.a,{variant:"body1",color:"inherit",to:"/",component:l.a},c("Dashboard")),n.a.createElement(d.a,{variant:"body1",color:"textPrimary"},c("Prepaid Card Topup"))),n.a.createElement(d.a,{variant:"h3",color:"textPrimary"},c("Prepaid Card Topup")))},E=a(22),g=a.n(E),x=a(84),w=a(41),k=a(990),_=a(991),S=a(940),C=a(941),y=a(951),T=a(924),P=a(910),B=a(1022),N=a(983),R=a(1119),A=a(182),M=a(14),q=new function e(){Object(A.a)(this,e),this.topup=function(){var e=Object(w.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.post("/api/v1/prepaidcards/topup",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=a(1023),W=a(1063),D=Object(c.a)((function(){return{root:{}}}));var H=function(e){var t=e.className,a=Object(p.a)(e,["className"]),r=D(),c=Object(N.a)().successSnackbar,u=Object(i.a)().t,o=Object(F.a)(),l=o.members,m=o.getMemberFullName,f=Object(W.a)().branches;return l.length&&f.length?n.a.createElement(_.a,{initialValues:{member:l[0],branch:f[0],topup:0,remark:""},validationSchema:k.d().shape({member:k.d().required(),branch:k.d().required(),topup:k.c().required(u("is required",{name:u("Topup")}))}),onSubmit:function(){var e=Object(w.a)(g.a.mark((function e(t,a){var r,n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.setErrors,n=a.setStatus,s=a.setSubmitting,e.prev=1,e.next=4,q.topup(Object(x.a)({},t,{phone:t.member.phone,branch_id:t.branch.code}));case 4:n({success:!0}),s(!1),c(u("Topup success")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),n({success:!1}),r({submit:e.t0.response.data.message}),s(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var c=e.errors,i=e.handleBlur,o=e.handleChange,p=e.handleSubmit,d=e.isSubmitting,v=e.touched,h=e.values,O=e.setFieldValue;return n.a.createElement("form",Object.assign({className:Object(b.a)(r.root,t),onSubmit:p},a),n.a.createElement(S.a,null,n.a.createElement(C.a,null,c.submit&&n.a.createElement(s.a,{mb:3},n.a.createElement(B.a,{severity:"error"},c.submit)),n.a.createElement(y.a,{container:!0,spacing:3},n.a.createElement(y.a,{item:!0,md:6,xs:12},n.a.createElement(R.a,{options:l,getOptionLabel:function(e){return m(e)},value:h.member,onBlur:i,name:"member",onChange:function(e,t){return O("member",t)},textFieldProps:{required:!0,variant:"outlined",label:u("Member")}})),n.a.createElement(y.a,{item:!0,md:6,xs:12},n.a.createElement(R.a,{options:f,getOptionLabel:function(e){return"".concat(e.name)},value:h.branch,onBlur:i,name:"branch",onChange:function(e,t){return O("branch",t)},textFieldProps:{required:!0,variant:"outlined",label:u("Branch")}})),n.a.createElement(y.a,{item:!0,md:6,xs:12},n.a.createElement(T.a,{error:Boolean(v.topup&&c.topup),fullWidth:!0,helperText:v.topup&&c.topup,label:u("Topup"),name:"topup",type:"number",onBlur:i,onChange:o,required:!0,value:h.topup,variant:"outlined"})),n.a.createElement(y.a,{item:!0,md:6,xs:12},n.a.createElement(T.a,{error:Boolean(v.remark&&c.remark),fullWidth:!0,helperText:v.remark&&c.remark,label:u("Remark"),name:"remark",onBlur:i,onChange:o,value:h.remark,variant:"outlined"}))),n.a.createElement(s.a,{mt:2},n.a.createElement(P.a,{variant:"contained",color:"secondary",type:"submit",disabled:d},u("Submit"))))))})):null},I=Object(c.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));t.default=function(){var e=I(),t=Object(i.a)().t;return n.a.createElement(o.a,{className:e.root,title:t("Prepaid Card Topup")},n.a.createElement(u.a,{maxWidth:"lg"},n.a.createElement(j,null),n.a.createElement(s.a,{mt:3},n.a.createElement(H,null))))}},975:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(0);function n(){var e=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),e}},976:function(e,t,a){"use strict";var r=a(126),n=a(0),c=a.n(n),u=a(320),s=a(49);function i(){var e;window.gtag&&(e=window).gtag.apply(e,arguments)}var o={pageview:function(e){i("config",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MEMBER_API_HOST:"192.168.1.116",REACT_APP_MEMBER_API_PORT:"8000"}).REACT_APP_GA_MEASUREMENT_ID,e)},event:function(e,t){i("event",e,t)}},p=Object(n.forwardRef)((function(e,t){var a=e.title,i=e.children,p=Object(r.a)(e,["title","children"]),l=Object(s.h)(),b=Object(n.useCallback)((function(){o.pageview({page_path:l.pathname})}),[l]);return Object(n.useEffect)((function(){b()}),[b]),c.a.createElement("div",Object.assign({ref:t},p),c.a.createElement(u.Helmet,null,c.a.createElement("title",null,a)),i)}));t.a=p},983:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(0);var r=a(185);function n(){var e=Object(r.useSnackbar)().enqueueSnackbar;return{successSnackbar:function(t){e(t,{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"right"}})}}}}}]);
//# sourceMappingURL=19.e5058de6.chunk.js.map