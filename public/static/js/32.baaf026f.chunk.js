(this["webpackJsonpmember-backend"]=this["webpackJsonpmember-backend"]||[]).push([[32],{1018:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var r=a(22),n=a.n(r),c=a(40),o=a(57),i=a(0),s=a(972),l=a(975),u=a(997);function m(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],m=Object(l.a)(),d=Object(s.a)().i18n.language,p=Object(i.useCallback)(Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.list();case 2:t=e.sent,r(t.data.data);case 4:case"end":return e.stop()}}),e)}))),[m]),b=Object(i.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.delete(t);case 2:p();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]),f=Object(i.useCallback)((function(e){switch(d){case"zh-TW":case"zh-ZN":return"".concat(e.last_name).concat(e.first_name);default:return"".concat(e.first_name," ").concat(e.last_name)}}),[d]);return Object(i.useEffect)((function(){p()}),[p]),{members:a,deleteMember:b,getMemberFullName:f}}},1268:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return oe}));var r=a(22),n=a.n(r),c=a(40),o=a(57),i=a(0),s=a.n(i),l=a(49),u=a(984),m=a.n(u),d=a(485),p=a(943),b=a(301),f=a(967),h=a(955),g=a(949),v=a(31),E=a.n(v),O=a(972),y=a(4),j=a.n(y),_=a(2),k=a(950),x=a(939),w=a(940),R=a(971),T=a(73),C=Object(d.a)((function(e){return{root:{},name:{marginTop:e.spacing(1)},avatar:{height:100,width:100}}}));function B(e){var t=e.member,a=C(),r=Object(O.a)().t;return t?s.a.createElement(k.a,{className:Object(_.a)(a.root),container:!0,spacing:3},s.a.createElement(k.a,{item:!0,lg:12,md:12,xl:12,xs:12},s.a.createElement(x.a,{className:Object(_.a)(a.root)},s.a.createElement(w.a,null,s.a.createElement(b.a,{display:"flex",alignItems:"center",flexDirection:"column",textAlign:"center"},s.a.createElement(R.a,{className:a.avatar}),s.a.createElement(T.a,{className:a.name,gutterBottom:!0,variant:"h3",color:"textPrimary"},"".concat(t.first_name)," ","".concat(t.last_name)),s.a.createElement(T.a,{className:a.name,gutterBottom:!0,variant:"body1",color:"textPrimary"},r("Phone"),":","".concat(t.phone)),s.a.createElement(T.a,{className:a.name,gutterBottom:!0,variant:"body1",color:"textPrimary"},r("Rank"),":","".concat(t.rank.name)),s.a.createElement(T.a,{className:a.name,gutterBottom:!0,variant:"body1",color:"textPrimary"},r("Register Branch"),":"," ",t.register_branch?"".concat(t.register_branch.name," (").concat(t.register_branch.code,")"):r("Non Register Branch")),s.a.createElement(T.a,{className:a.name,gutterBottom:!0,variant:"body1",color:"textPrimary"},r("Balance"),":","".concat(t.prepaidcard?t.prepaidcard.balance:0)),t.email&&s.a.createElement(T.a,{className:a.name,gutterBottom:!0,variant:"body1",color:"textPrimary"},r("Email"),":","".concat(t.email)),t.address&&s.a.createElement(T.a,{className:a.name,gutterBottom:!0,variant:"body1",color:"textPrimary"},r("Address"),":","".concat(t.address)),t.remark&&s.a.createElement(T.a,{className:a.name,gutterBottom:!0,variant:"body1",color:"textPrimary"},r("Remark"),":","".concat(t.remark))))))):null}B.prototype={member:j.a.object.isRequired};var N=a(917),P=a(918),S=a(919),D=a(956),H=a(921),M=a(923),z=a(144),A=a(126),I=a(74),q=a(969),L=a(951),W=a(978),Y=a.n(W),K=Object(d.a)((function(e){return{root:{},action:{marginBottom:e.spacing(1),"& + &":{marginLeft:e.spacing(1)}},actionIcon:{marginRight:e.spacing(1)}}}));var U=function(e){var t=e.className,a=Object(A.a)(e,["className"]),r=K(),n=Object(O.a)().t;return s.a.createElement(k.a,Object.assign({className:Object(_.a)(r.root,t),container:!0,justify:"space-between",spacing:3},a),s.a.createElement(k.a,{item:!0},s.a.createElement(q.a,{separator:s.a.createElement(Y.a,{fontSize:"small"}),"aria-label":"breadcrumb"},s.a.createElement(L.a,{variant:"body1",color:"inherit",to:"/",component:I.a},n("Dashboard")),s.a.createElement(L.a,{variant:"body1",color:"inherit",to:"/members",component:I.a},n("Member List")),s.a.createElement(T.a,{variant:"body1",color:"textPrimary"},n("Member Detail"))),s.a.createElement(T.a,{variant:"h3",color:"textPrimary"},n("Member Detail"))))},J=(a(1018),a(975)),F=a(976),G=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));function V(e){var t=e.chops,a=G(),r=Object(O.a)().t;return t?s.a.createElement(D.a,{component:z.a},s.a.createElement(N.a,{className:a.table,"aria-label":"simple table"},s.a.createElement(H.a,null,s.a.createElement(M.a,null,s.a.createElement(S.a,null,r("Branch")),s.a.createElement(S.a,null,r("Branch Id")),s.a.createElement(S.a,null,r("Chops")))),s.a.createElement(P.a,null,t.map((function(e){return s.a.createElement(M.a,{key:e.id},s.a.createElement(S.a,{component:"th",scope:"row"},e.branch.name),s.a.createElement(S.a,null,e.branch.code),s.a.createElement(S.a,null,e.chops))})),s.a.createElement(M.a,{key:"TOTAL_CHOPS"},s.a.createElement(S.a,{colSpan:2},r("Total")),s.a.createElement(S.a,null,E.a.sumBy(t,"chops")))))):null}V.prototype={chops:j.a.array.isRequired};var Z=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),Q=function(e){var t=e.orderRecords,a=(Z(),Object(O.a)().t),r=[{title:a("Branch"),field:"branch",render:function(e){return"".concat(e.branch.name)}},{title:a("Order Id"),field:"order_id"},{title:a("Payment Type"),field:"payment_type",render:function(e){return a("PaymentType.".concat(e.payment_type))}},{title:a("Clerk"),field:"clerk"},{title:a("Items Count"),field:"items_count"},{title:a("Amount"),field:"amount"},{title:a("Transaction time"),field:"transaction_time"},{title:a("Status"),field:"status",render:function(e){return a("TransactionStatus.".concat(e.status))}}];return s.a.createElement(m.a,{title:a("Order Records"),columns:r,data:t,options:{pageSize:10,pageSizeOptions:[10,15,30]}})};Q.prototype={orderRecords:j.a.array.isRequired};var X=Q,$=a(999),ee=(Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),function(e){var t=e.chopRecords,a=Object(O.a)().t,r=[{title:a("Branch"),field:"branch",render:function(e){return"".concat(e.branch.name)}},{title:a("Time"),field:"created_at",render:function(e){return Object($.a)(e.created_at)}},{title:a("Type"),field:"type",render:function(e){return a("ChopsType.".concat(e.type))}},{title:a("Earn Chops"),field:"chops"},{title:a("Consume Chops"),field:"consume_chops"}];return s.a.createElement(m.a,{title:a("Chop Records"),options:{pageSize:10,pageSizeOptions:[10,15,30]},columns:r,data:t})});ee.prototype={orderRecords:j.a.array.isRequired};var te=ee,ae=(Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),function(e){var t=e.prepaidcardRecords,a=Object(O.a)().t,r=[{title:a("Branch"),field:"branch",render:function(e){return"".concat(e.branch.name)}},{title:a("Time"),field:"created_at",render:function(e){return Object($.a)(e.created_at)}},{title:a("Type"),field:"type",render:function(e){return a("PrepaidcardsType.".concat(e.type))}},{title:a("Topup"),field:"topup"},{title:a("Payment"),field:"payment"}];return s.a.createElement(m.a,{title:a("Prepaidcard Records"),options:{pageSize:10,pageSizeOptions:[10,15,30]},columns:r,data:t})});ae.prototype={orderRecords:j.a.array.isRequired};var re=ae,ne=a(997),ce=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));function oe(){var e=Object(l.i)().id,t=ce(),a=Object(O.a)().t,r=Object(i.useState)("member_information"),u=Object(o.a)(r,2),m=u[0],d=u[1],v=Object(J.a)(),E=s.a.useState(),y=Object(o.a)(E,2),j=y[0],_=y[1],k=Object(i.useCallback)(Object(c.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.a.detail(e);case 2:a=t.sent,_(a.data.data);case 4:case"end":return t.stop()}}),t)}))),[v]);return Object(i.useEffect)((function(){k()}),[k]),j?s.a.createElement(F.a,{className:t.root,title:a("Member Detail")},s.a.createElement(p.a,{maxWidth:!1},s.a.createElement(U,null),s.a.createElement(b.a,{mt:3},s.a.createElement(f.a,{onChange:function(e,t){d(t)},scrollButtons:"auto",value:m,variant:"scrollable",textColor:"secondary",className:t.tabs},[{value:"member_information",label:"Member Information"},{value:"chops",label:"Chops Detail"},{value:"order_records",label:"Order Records"},{value:"chop_records",label:"Chop Records"},{value:"prepaidcard_records",label:"Prepaidcard Records"}].map((function(e){return s.a.createElement(h.a,{key:e.value,label:a(e.label),value:e.value})})))),s.a.createElement(g.a,null),s.a.createElement(b.a,{mt:3},"member_information"===m&&s.a.createElement(B,{member:j}),"chops"===m&&s.a.createElement(V,{chops:j.chops}),"order_records"===m&&s.a.createElement(X,{orderRecords:j.order_records}),"chop_records"===m&&s.a.createElement(te,{chopRecords:j.chop_records}),"prepaidcard_records"===m&&s.a.createElement(re,{prepaidcardRecords:j.prepaidcard_records})))):null}},975:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(0);function n(){var e=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),e}},976:function(e,t,a){"use strict";var r=a(126),n=a(0),c=a.n(n),o=a(318),i=a(49);function s(){var e;window.gtag&&(e=window).gtag.apply(e,arguments)}var l={pageview:function(e){s("config",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GA_MEASUREMENT_ID,e)},event:function(e,t){s("event",e,t)}},u=Object(n.forwardRef)((function(e,t){var a=e.title,s=e.children,u=Object(r.a)(e,["title","children"]),m=Object(i.h)(),d=Object(n.useCallback)((function(){l.pageview({page_path:m.pathname})}),[m]);return Object(n.useEffect)((function(){d()}),[d]),c.a.createElement("div",Object.assign({ref:t},u),c.a.createElement(o.Helmet,null,c.a.createElement("title",null,a)),s)}));t.a=u},997:function(e,t,a){"use strict";var r=a(22),n=a.n(r),c=a(40),o=a(182),i=a(14),s=new function e(){Object(o.a)(this,e),this.list=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/v1/members");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),this.create=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/v1/members",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.get=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/v1/members/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.update=function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.patch("/api/v1/members/".concat(t),a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.delete("/api/v1/members/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.detail=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/v1/members/".concat(t,"/detail"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=s},999:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(243),n=a.n(r),c=function(e){return n()(e).format("YYYY-MM-DD HH:mm:ss")}}}]);
//# sourceMappingURL=32.baaf026f.chunk.js.map